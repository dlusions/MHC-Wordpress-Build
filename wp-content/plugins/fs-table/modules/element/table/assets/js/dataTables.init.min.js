/*!
 * @package     [FS] Table Pro element for YOOtheme Pro
 * @subpackage  fs-table
 *
 * @author      Flart Studio https://flart.studio
 * @copyright   Copyright (C) 2026 Flart Studio. All rights reserved.
 * @license     Flart Studio Proprietary License — see https://flart.studio/license
 * @link        https://flart.studio/yootheme-pro/table-pro
 * @build       (FLART_BUILD_NUMBER)
 *
 * Use of this file is subject to license terms. Redistribution is strictly prohibited.
 */
class FSdataTables{constructor(e){const t=e.elementID;let a=new DataTable("#"+e.tableID,{stateSave:e.stateSave,searching:e.searching,ordering:e.ordering,scrollX:e.scrollX,scrollY:e.scrollY,info:e.info,columnDefs:[{targets:"no-sort",orderable:!1},{targets:"sort-string",type:"natural-nohtml"},{targets:"sort-number",type:"num"},{targets:"sort-date",type:"date"}],fixedHeader:{header:e.fixedHeader.header,footer:e.fixedHeader.footer,headerOffset:e.fixedHeader.headerOffset,footerOffset:e.fixedHeader.footerOffset},mark:!!e.searchHighlight&&{exclude:[".dt-search-ignore"]},order:JSON.parse("["+e.orderColumn+"]"),paging:e.paging,lengthChange:e.lengthChange,pageLength:e.pageLength,lengthMenu:[[5,10,25,50,100,200,500,-1],[5,10,25,50,100,200,500,e.translations.paginationAll]],sDom:'<"fs-datatable-block fs-datatable-header uk-margin uk-margin-top"<"uk-grid uk-flex-middle fs-table-dt-header"<"uk-width-1-1 uk-width-expand@s fs-table-page-length uk-text-left"l><"uk-width-1-1 uk-width-expand@s fs-table-search uk-flex uk-flex-left uk-flex-right@s"f>>>rt<"fs-datatable-block fs-datatable-info uk-margin"<"uk-grid uk-flex-middle"<"uk-width-1-1 uk-width-1-4@s uk-visible@s"i><"uk-width-1-1 uk-width-expand@s"p>>>',language:{lengthMenu:e.translations.lengthMenu,zeroRecords:e.translations.zeroRecords,info:e.translations.info,infoEmpty:e.translations.infoEmpty,infoFiltered:e.translations.infoFiltered,search:"",searchPlaceholder:e.translations.search,paginate:{previous:e.translations.previous,next:e.translations.next}},fnDrawCallback:function(e){e.aiDisplay.length<=e._iDisplayLength?$(e.nTableWrapper).find(".fs-datatable-block.fs-datatable-info").hide():$(e.nTableWrapper).find(".fs-datatable-block.fs-datatable-info").show()},initComplete:function(){if(e.filter.enable&&e.searching){function t(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,(e=>t[e]))}this.api().columns(e.filter.columns).every((function(){const a=this,o=e.filter.position,i="header"===o?a.header():"footer"===o?a.footer():"",s=e.filter.splitTags,r=!1===s&&e.filter.regex,l=e.filter.dropdownWidth,d=e.filter.dropdownTextLimit,f=e.filter.dropdownTextTransform,c=e.filter.dropdownSize;let h=e.filter.dropdownPlaceholder;const u=$(a.header())?.text(),g=e.translations.filterAll;h="col-name"===h?u||g:"all-col-name"===h?`${g} — ${u}`:g;const p=$("<select>",{class:`fs-table-filter-select uk-select ${c} ${f}`,style:`min-width:${l}px;`,name:h.toLowerCase().replace(/\s+/g,"-"),html:$("<option>",{value:"",text:h})}).appendTo($(i).empty()).on("change",(function(){const e=$(this).val(),t=e?$(this).find(`option[value="${e}"]`).text():"",i=r?""===e?"":`^${t}$`:t;a.search(i,!0,!1).draw(),"footer"===o&&setTimeout(n,300)})).on("click",(function(e){e.stopPropagation()})),b=[];a.nodes().unique().each((e=>{const t=e.dataset.tags;(s?t.split(",").map((e=>e.trim())):[t]).forEach((e=>{e&&!b.includes(e)&&b.push(e)}))})),b.sort(),b.forEach((e=>{const n=t(e),o=d&&"0"!==d&&e.length>d?`${e.slice(0,d)}...`:e;if(!p.find(`option[value="${n.toLowerCase()}"]`).length){const e=n.toLowerCase(),t=r?a.search()===`^${e}$`:a.search()===e;p.append($("<option>",{value:e,text:o,selected:t}))}}))}))}}});function n(){UIkit.scroll("",{offset:90}).scrollTo("#"+t)}a.on("page",(function(){setTimeout(n,300)}));let o=a.settings()[0];if(o.oInit){if(!0===o.oInit.fixedHeader.header||!0===o.oInit.fixedHeader.footer){function i(){let e=$("#"+t+" .fs-load-more-container").outerHeight();$("#"+t+" .dataTables_scrollBody").css("max-height",e+"px")}$("#"+t+" .dataTables_scrollBody").css("overflow-y","hidden");let s=!1;function r(){const n=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--uk-breakpoint-m"),10);if("responsive"===e.tableResponsive){const e=window.innerWidth<n;if(e&&!s){a.fixedHeader.disable();let e=$("#"+t+" .fs-load-more-container").outerHeight();$("#"+t+" .dataTables_scrollBody").css("height",e+"px"),s=!0}else!e&&s&&(a.fixedHeader.enable(),s=!1)}}$(window).resize((function(){"responsive"===e.tableResponsive&&r(),i()})),a.on("page search",(function(){setTimeout(i,100)}));let l=$("#"+t+" .fs-load-more-container")[0];new MutationObserver((function(e){i()})).observe(l,{attributes:!0,childList:!0,subtree:!0,characterData:!0}),i(),r()}(!o.oInit.paging||o.oInit.paging&&!o.oInit.bLengthChange)&&$("#"+t+" .fs-table-dt-header").addClass("no-pagination"),o.oInit.searching&&($("<span uk-search-icon></span>").insertBefore("#"+t+" .fs-table-dt-header .uk-search-input"),$("#"+t+" .fs-table-dt-header .fs-table-search label").addClass("uk-search uk-search-default uk-width-1-1")),o.oInit.paging&&o.oInit.bLengthChange||o.oInit.searching||($("#"+t+" .fs-datatable-header").remove(),$("#"+t+" .dataTables_wrapper").addClass("uk-margin-top")),o.oInit.paging||o.oInit.info||$("#"+t+" .fs-datatable-info").remove()}}}