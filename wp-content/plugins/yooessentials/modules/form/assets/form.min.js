/* Essentials YOOtheme Pro 2.4.12 build 1202.1125; ZOOlanders https://www.zoolanders.com; Copyright (C) Joolanders, SL; http://www.gnu.org/licenses/gpl.html GNU/GPL */

(function(){"use strict";var w=({modal:o,util:{$:e,$$:r,trigger:a,removeAttr:y,addClass:h,removeClass:d,empty:b,html:p,each:v,on:E,includes:$,scrollIntoView:m}})=>({connected(){this.$submit=r('button[type="submit"]',this.$el),this.$errors=e("[data-yooessentials-form-errors]",this.$el),this.$fields=r("[data-yooessentials-form-field]",this.$el).reduce((t,i)=>({...t,[i.dataset.yooessentialsFormField]:i}),{}),y(this.$submit,"disabled")},props:{errors:Array,action:String,config:Object,validateAction:String,validationErrors:Array},data:()=>({action:"",errors:[],config:{},submitting:!1,validateAction:"",validationErrors:[]}),events:{submit(t){if(t.preventDefault(),this.config.html5validation&&!this.$el.reportValidity()){const i=new FormData(this.$el);a(this.$el,"form:validation-error",[{data:i}]),a(document,"yooessentials-form:validation-error",[{form:this.$el,data:i}]);return}this.submit()},change(t){const i=t.target,s=new FormData(this.$el);a(this.$el,"form:field-change",[{data:s}]),a(document,"yooessentials-form:field-change",[{form:this.$el,field:i,data:s}])}},methods:{submit(){const t=new FormData(this.$el);let i=!1;i=!a(this.$el,"form:submit",[{data:t}]),i=i||!a(document,"yooessentials-form:submit",[{form:this.$el,data:t}]),!i&&this.doSubmit()},enableSpinner(){v(this.$submit,t=>{const i=e(".ye-form--btn-content",t),s=e(".ye-form--btn-spinner",t);h(i,"uk-invisible"),d(s,"uk-hidden")})},disableSpinner(){v(this.$submit,t=>{const i=e(".ye-form--btn-content",t),s=e(".ye-form--btn-spinner",t);d(i,"uk-invisible"),h(s,"uk-hidden")})},doSubmit(t){this.submitting=!0,setTimeout(()=>{this.submitting===!0&&this.enableSpinner()},200);const i=new FormData(this.$el);for(const s in t)i.append(s,t[s]);fetch(this.validateAction||this.action,{body:i,method:"POST",responseType:"json",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}).then(s=>s.json()).then(s=>{if(!s.success){this.processErrors({response:s});return}a(this.$el,"form:submitted",[{response:s,data:i}]),a(document,"yooessentials-form:submitted",[{form:this.$el,response:s,data:i}]),this.validateAction&&this.$el.submit(),this.resetForm()}).catch(s=>{var l,u,f;const n=((l=s==null?void 0:s.xhr)==null?void 0:l.status)||500;let c=((u=s==null?void 0:s.xhr)==null?void 0:u.statusText)||"Internal Server Error";(n===301||n===404)&&(c="Submission endpoint not found."),this.processErrors({data:i,status:n,statusText:c,response:(f=s==null?void 0:s.xhr)==null?void 0:f.response})})},processErrors({response:t,statusText:i,data:s}){var l,u,f;this.submitting=!1,this.disableSpinner(),this.resetErrorsDisplay(),this.resetValidationErrorsDisplay();const n=this.validationErrors=(l=t==null?void 0:t.validation)!=null?l:[];this.errors=(u=t==null?void 0:t.errors)!=null?u:["Submission failed, please try again or contact us about this issue.",i],(f=n[""])!=null&&f.length&&(this.errors=[...this.errors,...n[""]]),this.displayErrors();const c={errors:this.errors,validation:n,data:s};a(this.$el,"form:submission-error",[c]),a(document,"yooessentials-form:submission-error",[{form:this.$el,...c}])},displayErrors(){var t;if(this.displayValidationErrors(),this.displaySubmissionErrors(),(t=this.config.errors_display)!=null&&t.modal){this.displayAllErrorsInModal();return}},displayAllErrorsInModal(){var c;let t=[...this.errors];for(const l in this.validationErrors)t=[...t,...this.validationErrors[l]];let i=((c=this.config.errors_display)==null?void 0:c.modal_content)||"";const s=`<ul class="uk-list">${t.map(l=>`<li>${l}</li>`).join("")}</ul>`;$(i,"{errors}")||(i="{errors}"),i=i.replace("{errors}",s);const n=o.alert(i).dialog;E(n.$el,"beforeshow",()=>{var l;(l=this.config.errors_display)!=null&&l.modal_center&&h(n.panel,"uk-margin-auto-vertical")})},displaySubmissionErrors(){if(this.resetErrorsDisplay(),!this.errors.length)return;const t=this.errors.map(i=>`<li>${i}</li>`).join("");p(this.$errors,`<div class="uk-alert-warning uk-margin-top" uk-alert>
                    <a class="uk-alert-close" uk-close></a>
                    <ul class="uk-list">${t}</ul>
                </div>`)},displayValidationErrors(){this.resetValidationErrorsDisplay();const t=this.validationErrors;let i;for(const s in t){const n=this.$fields[s],c=t[s];if(i=i||n,!n){this.errors.push(t[s]);continue}const l=r("[name]",n),u=r("[data-yooessentials-form-field-errors]",n);h(l,"uk-form-danger"),p(u,'<ul class="uk-list">'+c.map(f=>`<li>${f}</li>`)+"</ul>")}i&&m(i)},resetForm(){this.errors=[],this.validationErrors=[],this.submitting=!1,this.config.reset_after_submit&&this.$el.reset(),this.disableSpinner(),this.resetErrorsDisplay(),this.resetValidationErrorsDisplay()},resetErrorsDisplay(){b(this.$errors)},resetValidationErrorsDisplay(){for(const t in this.$fields){const i=this.$fields[t],s=r("[name]",i),n=r("[data-yooessentials-form-field-errors]",i);d(s,"uk-form-danger"),b(n)}}}}),k=({util:{on:o}})=>{o(document,"yooessentials-form:submitted",(e,{response:r})=>{r!=null&&r.download&&r.download.forEach(g)})};function g(o){var e=document.createElement("a");e.href=o,e.download=o.substring(o.lastIndexOf("/")+1),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}var S=({util:{on:o,addClass:e},modal:r})=>{o(document,"yooessentials-form:submitted",(a,{form:y,data:h,response:d})=>{if(d!=null&&d.message_action)try{const{content:b,stack:p,center:v,onshown:E,onhidden:$}=d.message_action,m=r.alert(b,{stack:p}).dialog;e(m.$el,"ye-form-modal"),o(m.$el,"beforeshow",()=>{v&&e(m.panel,"uk-margin-auto-vertical")}),o(m.$el,"shown",t=>{E&&new Function("event","form","data","response",E).call(m,t,y,h,d)}),o(m.$el,"hidden",t=>{$&&new Function("event","form","data","response",$).call(m,t,y,h,d)})}catch{}})},D=({util:{on:o}})=>{o(document,"yooessentials-form:submitted",(e,{response:r})=>{const a=(r==null?void 0:r.redirect)||{};if(a.to){const y=a.timeout||0;setTimeout(()=>{window.open(a.to,a.blank?"_blank":"_self")},y*1e3)}})};A(()=>{var e;const o=window.UIkit;if(!o||!((e=o==null?void 0:o.version)!=null&&e.match(/^3\./)))throw new Error("YOOessentials Form Init Error: UIkit v3.x is required.");o.component("yooessentials-form",w(o)),k(o),S(o),D(o)});function A(o){if(window.document.readyState!=="loading"){o();return}window.document.addEventListener("DOMContentLoaded",()=>{o()},{once:!0})}})();
