/* Essentials YOOtheme Pro 2.4.12 build 1202.1125; ZOOlanders https://www.zoolanders.com; Copyright (C) Joolanders, SL; http://www.gnu.org/licenses/gpl.html GNU/GPL */

(function(T,L,u,M,O,g,y,m){"use strict";var Oe={name:"LayoutsModel",data:()=>({layouts:{}}),computed:{libraries:{get(){return u.helpers.Config.get("layout.libraries",[])},set(t){u.helpers.Config.set("layout.libraries",t)}}},methods:{isWritable(t){const e=this.libraries.find(r=>r.id===t);return!!this.storageOf(e)},storageOf(t){return u.helpers.Storage.storages.find(e=>e.id===(t==null?void 0:t.storage))},saveLibrary(t){const e=u.helpers.Storage.storages.find(n=>n.id===t.storage),r=[...this.libraries];if(!e)throw Error(`Unknown Storage: ${t.storage}`);return t.id?r[r.findIndex(({id:n})=>n===t.id)]=t:(t={...t,id:g.uuid(),_meta:{created_at:Date.now(),created_on:u.version}},r.push(t)),this.libraries=r,t},deleteLibrary(t){const e=[...this.libraries];e.splice(e.indexOf(t),1),this.libraries=e},getNodesList(t,e=0){return M("yooessentials/layout/library").post({library:t,refresh:e}).json(r=>{if(O.isArray(r))return this.layouts={...this.layouts,[t]:r},r})},getNode(t,e){return M("yooessentials/layout/library/node").post({library:t,ids:g.arrify(e).map(r=>r.id)}).json()},saveNode(t,e){return t==="my"?u.yoo.Library.saveElement(e,e.type==="layout"?u.yoo.Library.findElement(e.name,e.type):void 0):(e.created&&(e.modified=new Date().toISOString()),M("yooessentials/layout/library/node/save").post({library:t,node:e}).res(()=>{this.getNodesList(t)}))},updateNode(t,e){return this.getNode(t,[{id:e.id}]).then(([r])=>this.saveNode(t,{...r,...e}))},deleteNodes(t,e){return M("yooessentials/layout/library/node/delete").post({library:t,ids:e}).res(()=>{this.getNodesList(t)})},findNode(t,e){return this.layouts[t].find(({name:r,type:n})=>e.name===r&&e.type===n)}}};function k(t,e,r,n,a,i,o,l){var s=typeof t=="function"?t.options:t;return e&&(s.render=e,s.staticRenderFns=r,s._compiled=!0),{exports:t,options:s}}const Pe={name:"NodeModal",props:{edit:{type:Boolean,default:!1},node:{type:Object,required:!0},builder:{type:Object,required:!0},libraries:{type:Array,required:!0},library:{type:String,default:""}},data:()=>({exists:!1,chosenLibrary:"my"}),computed:{type(){return u.yoo.Builder.type(this.node)},title(){return this.type.element?"Element Preset":this.type.title||this.node.type}},created(){this.edit||this.$set(this.node,"name","")}};var Re=function(){var e=this,r=e._self._c;return r("form",{on:{submit:function(n){return n.preventDefault(),e.$emit("resolve",{node:e.node,library:e.library||e.chosenLibrary})}}},[r("div",{staticClass:"uk-modal-header"},[r("h2",{staticClass:"uk-modal-title"},[e._v(`
            `+e._s(e.edit?e.$t("Rename %type%",{type:e.title}):e.$t("Save %type%",{type:e.title}))+`
        `)])]),e._v(" "),r("div",{staticClass:"uk-modal-body uk-form-stacked"},[r("div",{staticClass:"uk-margin"},[r("label",{staticClass:"uk-form-label",attrs:{for:"form-element-save-name"}},[e._v(e._s(e.$t("Name")))]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.node.name,expression:"node.name"}],staticClass:"uk-input",attrs:{id:"form-element-save-name",placeholder:e.type.title,type:"text",required:"",autofocus:""},domProps:{value:e.node.name},on:{input:function(n){n.target.composing||e.$set(e.node,"name",n.target.value)}}})]),e._v(" "),e.library?e._e():r("div",[r("label",{staticClass:"uk-form-label",attrs:{for:"form-element-save-library"}},[e._v(e._s(e.$t("Library")))]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.chosenLibrary,expression:"chosenLibrary"}],staticClass:"uk-select",on:{change:function(n){var a=Array.prototype.filter.call(n.target.options,function(i){return i.selected}).map(function(i){var o="_value"in i?i._value:i.value;return o});e.chosenLibrary=n.target.multiple?a:a[0]}}},[r("option",{attrs:{value:"my"}},[e._v(`
                    `+e._s(e.$t(e.node.type==="section"?"My Layouts":"My Presets"))+`
                `)]),e._v(" "),e._l(e.libraries,function(n){return r("option",{key:n.id,domProps:{value:n.id}},[e._v(`
                    `+e._s(e.$t(n.name))+`
                `)])})],2)]),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:!e.edit&&e.exists,expression:"!edit && exists"}],staticClass:"uk-text-muted uk-margin-small"},[e._v(`
            `+e._s(e.$t('"%name%" already exists in the library, it will be overwritten when saving.',{name:e.node.name}))+`
        `)])]),e._v(" "),r("div",{staticClass:"uk-modal-footer uk-text-right"},[r("button",{staticClass:"uk-button uk-button-text uk-modal-close uk-margin-small-right",attrs:{type:"button"}},[e._v(`
            `+e._s(e.$t("Cancel"))+`
        `)]),e._v(" "),r("button",{staticClass:"uk-button uk-button-primary"},[e._v(e._s(e.$t("Save")))])])])},Ae=[],Fe=k(Pe,Re,Ae),P=Fe.exports,Y=6e4,H=36e5;function p(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function je(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function We(t,e){var r;p(1,arguments);var n=je((r=void 0)!==null&&r!==void 0?r:2);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var a=ze(t),i;if(a.date){var o=Ye(a.date,n);i=He(o.restDateString,o.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var l=i.getTime(),s=0,d;if(a.time&&(s=Be(a.time),isNaN(s)))return new Date(NaN);if(a.timezone){if(d=Je(a.timezone),isNaN(d))return new Date(NaN)}else{var c=new Date(l+s),h=new Date(0);return h.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),h.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),h}return new Date(l+s+d)}var N={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Ie=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Ue=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Ee=/^([+-])(\d{2})(?::?(\d{2}))?$/;function ze(t){var e={},r=t.split(N.dateTimeDelimiter),n;if(r.length>2)return e;if(/:/.test(r[0])?n=r[0]:(e.date=r[0],n=r[1],N.timeZoneDelimiter.test(e.date)&&(e.date=t.split(N.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){var a=N.timezone.exec(n);a?(e.time=n.replace(a[1],""),e.timezone=a[1]):e.time=n}return e}function Ye(t,e){var r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};var a=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?a:i*100,restDateString:t.slice((n[1]||n[2]).length)}}function He(t,e){if(e===null)return new Date(NaN);var r=t.match(Ie);if(!r)return new Date(NaN);var n=!!r[4],a=w(r[1]),i=w(r[2])-1,o=w(r[3]),l=w(r[4]),s=w(r[5])-1;if(n)return Ge(e,l,s)?Ve(e,l,s):new Date(NaN);var d=new Date(0);return!Ze(e,i,o)||!qe(e,a)?new Date(NaN):(d.setUTCFullYear(e,i,Math.max(a,o)),d)}function w(t){return t?parseInt(t):1}function Be(t){var e=t.match(Ue);if(!e)return NaN;var r=R(e[1]),n=R(e[2]),a=R(e[3]);return Qe(r,n,a)?r*H+n*Y+a*1e3:NaN}function R(t){return t&&parseFloat(t.replace(",","."))||0}function Je(t){if(t==="Z")return 0;var e=t.match(Ee);if(!e)return 0;var r=e[1]==="+"?-1:1,n=parseInt(e[2]),a=e[3]&&parseInt(e[3])||0;return Ke(n,a)?r*(n*H+a*Y):NaN}function Ve(t,e,r){var n=new Date(0);n.setUTCFullYear(t,0,4);var a=n.getUTCDay()||7,i=(e-1)*7+r+1-a;return n.setUTCDate(n.getUTCDate()+i),n}var Xe=[31,null,31,30,31,30,31,31,30,31,30,31];function B(t){return t%400===0||t%4===0&&t%100!==0}function Ze(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(Xe[e]||(B(t)?29:28))}function qe(t,e){return e>=1&&e<=(B(t)?366:365)}function Ge(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function Qe(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function Ke(t,e){return e>=0&&e<=59}var et={};function tt(){return et}function A(t){"@babel/helpers - typeof";return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(t)}function f(t){p(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||A(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function D(t,e){p(2,arguments);var r=f(t),n=f(e),a=r.getTime()-n.getTime();return a<0?-1:a>0?1:a}function rt(t,e){p(2,arguments);var r=f(t),n=f(e),a=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return a*12+i}function nt(t){p(1,arguments);var e=f(t);return e.setHours(23,59,59,999),e}function at(t){p(1,arguments);var e=f(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function it(t){p(1,arguments);var e=f(t);return nt(e).getTime()===at(e).getTime()}function ot(t,e){p(2,arguments);var r=f(t),n=f(e),a=D(r,n),i=Math.abs(rt(r,n)),o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*i);var l=D(r,n)===-a;it(f(t))&&i===1&&D(t,n)===1&&(l=!1),o=a*(i-Number(l))}return o===0?0:o}function st(t,e){return p(2,arguments),f(t).getTime()-f(e).getTime()}var ut={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},lt="trunc";function dt(t){return ut[lt]}function ct(t,e,r){p(2,arguments);var n=st(t,e)/1e3;return dt()(n)}var ft={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},mt=function(e,r,n){var a,i=ft[e];return typeof i=="string"?a=i:r===1?a=i.one:a=i.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function F(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.width?String(e.width):t.defaultWidth,n=t.formats[r]||t.formats[t.defaultWidth];return n}}var ht={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},vt={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},pt={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},gt={date:F({formats:ht,defaultWidth:"full"}),time:F({formats:vt,defaultWidth:"full"}),dateTime:F({formats:pt,defaultWidth:"full"})},yt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},bt=function(e,r,n,a){return yt[e]};function S(t){return function(e,r){var n=r!=null&&r.context?String(r.context):"standalone",a;if(n==="formatting"&&t.formattingValues){var i=t.defaultFormattingWidth||t.defaultWidth,o=r!=null&&r.width?String(r.width):i;a=t.formattingValues[o]||t.formattingValues[i]}else{var l=t.defaultWidth,s=r!=null&&r.width?String(r.width):t.defaultWidth;a=t.values[s]||t.values[l]}var d=t.argumentCallback?t.argumentCallback(e):e;return a[d]}}var kt={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},_t={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},xt={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},wt={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},St={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},$t={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ct=function(e,r){var n=Number(e),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Mt={ordinalNumber:Ct,era:S({values:kt,defaultWidth:"wide"}),quarter:S({values:_t,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:S({values:xt,defaultWidth:"wide"}),day:S({values:wt,defaultWidth:"wide"}),dayPeriod:S({values:St,defaultWidth:"wide",formattingValues:$t,defaultFormattingWidth:"wide"})};function $(t){return function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=e.match(a);if(!i)return null;var o=i[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],s=Array.isArray(l)?Dt(l,function(h){return h.test(o)}):Nt(l,function(h){return h.test(o)}),d;d=t.valueCallback?t.valueCallback(s):s,d=r.valueCallback?r.valueCallback(d):d;var c=e.slice(o.length);return{value:d,rest:c}}}function Nt(t,e){for(var r in t)if(t.hasOwnProperty(r)&&e(t[r]))return r}function Dt(t,e){for(var r=0;r<t.length;r++)if(e(t[r]))return r}function Tt(t){return function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.match(t.matchPattern);if(!n)return null;var a=n[0],i=e.match(t.parsePattern);if(!i)return null;var o=t.valueCallback?t.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;var l=e.slice(a.length);return{value:o,rest:l}}}var Lt=/^(\d+)(th|st|nd|rd)?/i,Ot=/\d+/i,Pt={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Rt={any:[/^b/i,/^(a|c)/i]},At={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ft={any:[/1/i,/2/i,/3/i,/4/i]},jt={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Wt={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},It={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ut={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Et={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},zt={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Yt={ordinalNumber:Tt({matchPattern:Lt,parsePattern:Ot,valueCallback:function(e){return parseInt(e,10)}}),era:$({matchPatterns:Pt,defaultMatchWidth:"wide",parsePatterns:Rt,defaultParseWidth:"any"}),quarter:$({matchPatterns:At,defaultMatchWidth:"wide",parsePatterns:Ft,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:$({matchPatterns:jt,defaultMatchWidth:"wide",parsePatterns:Wt,defaultParseWidth:"any"}),day:$({matchPatterns:It,defaultMatchWidth:"wide",parsePatterns:Ut,defaultParseWidth:"any"}),dayPeriod:$({matchPatterns:Et,defaultMatchWidth:"any",parsePatterns:zt,defaultParseWidth:"any"})},Ht={code:"en-US",formatDistance:mt,formatLong:gt,formatRelative:bt,localize:Mt,match:Yt,options:{weekStartsOn:0,firstWeekContainsDate:1}};function J(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}function Bt(t){return J({},t)}function V(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}var X=1440,Jt=2520,j=43200,Vt=86400;function Xt(t,e,r){var n,a;p(2,arguments);var i=tt(),o=(n=(a=r==null?void 0:r.locale)!==null&&a!==void 0?a:i.locale)!==null&&n!==void 0?n:Ht;if(!o.formatDistance)throw new RangeError("locale must contain formatDistance property");var l=D(t,e);if(isNaN(l))throw new RangeError("Invalid time value");var s=J(Bt(r),{addSuffix:!!(r!=null&&r.addSuffix),comparison:l}),d,c;l>0?(d=f(e),c=f(t)):(d=f(t),c=f(e));var h=ct(c,d),oa=(V(c)-V(d))/1e3,v=Math.round((h-oa)/60),x;if(v<2)return r!=null&&r.includeSeconds?h<5?o.formatDistance("lessThanXSeconds",5,s):h<10?o.formatDistance("lessThanXSeconds",10,s):h<20?o.formatDistance("lessThanXSeconds",20,s):h<40?o.formatDistance("halfAMinute",0,s):h<60?o.formatDistance("lessThanXMinutes",1,s):o.formatDistance("xMinutes",1,s):v===0?o.formatDistance("lessThanXMinutes",1,s):o.formatDistance("xMinutes",v,s);if(v<45)return o.formatDistance("xMinutes",v,s);if(v<90)return o.formatDistance("aboutXHours",1,s);if(v<X){var sa=Math.round(v/60);return o.formatDistance("aboutXHours",sa,s)}else{if(v<Jt)return o.formatDistance("xDays",1,s);if(v<j){var ua=Math.round(v/X);return o.formatDistance("xDays",ua,s)}else if(v<Vt)return x=Math.round(v/j),o.formatDistance("aboutXMonths",x,s)}if(x=ot(c,d),x<12){var la=Math.round(v/j);return o.formatDistance("xMonths",la,s)}else{var Le=x%12,z=Math.floor(x/12);return Le<3?o.formatDistance("aboutXYears",z,s):Le<9?o.formatDistance("overXYears",z,s):o.formatDistance("almostXYears",z+1,s)}}function Zt(t,e){return p(1,arguments),Xt(t,Date.now(),e)}const qt={name:"ListView",directives:{confirm:"confirm"},filters:{date(t){return t&&Zt(We(t),{addSuffix:!0})}},inject:["Finder"],computed:{Builder(){return u.yoo.Builder}}};var Gt=function(){var e=this,r=e._self._c;return r("table",{staticClass:"uk-table uk-table-divider uk-table-hover uk-table-middle"},[r("thead",[r("tr",[r("th",{staticClass:"uk-table-shrink"},[r("input",{staticClass:"uk-checkbox",attrs:{type:"checkbox"},domProps:{checked:e.Finder.selectedAll},on:{change:function(n){return e.Finder.toggleSelectAll()}}})]),e._v(" "),r("th",{staticClass:"uk-table-shrink uk-text-center"},[e._v(e._s(e.$t("Type")))]),e._v(" "),r("th",[e._v(e._s(e.$t("Name")))]),e._v(" "),r("th",{staticClass:"uk-table-shrink"},[e._v(e._s(e.$t("Created")))]),e._v(" "),r("th",{staticClass:"uk-table-shrink"},[e._v(e._s(e.$t("Modified")))]),e._v(" "),r("th",{staticClass:"uk-table-shrink"})])]),e._v(" "),r("tbody",e._l(e.Finder.items,function(n){return r("tr",{key:n.id,staticClass:"uk-visible-toggle",class:{"uk-active":e.Finder.isSelected(n)}},[r("td",[r("input",{staticClass:"uk-checkbox",attrs:{type:"checkbox"},domProps:{checked:e.Finder.isSelected(n)},on:{click:function(a){return e.Finder.toggleSelect(n)}}})]),e._v(" "),r("td",{staticClass:"uk-table-shrink uk-text-center"},[n.type==="layout"?r("span",{staticClass:"yo-finder-list-image uk-icon-image",attrs:{"uk-icon":"copy","uk-tooltip":e.$t("Layout")}}):n.type==="section"?r("span",{staticClass:"yo-finder-list-image uk-icon-image",attrs:{"uk-icon":"file","uk-tooltip":e.$t("Section")}}):e.Builder.exists(n)?r("span",{attrs:{"uk-tooltip":e.Builder.type(n).title}},[r("img",{staticClass:"uk-text-muted uk-preserve-width uk-margin-small-right",attrs:{alt:n.name,src:e.Builder.type(n).iconSmall,"uk-svg":""}})]):e._e()]),e._v(" "),r("td",{staticClass:"uk-table-expand uk-text-nowrap uk-table-link"},[r("a",{staticClass:"uk-link-heading",on:{click:function(a){return e.Finder.$emit("select",n)}}},[e._v(e._s(n.name))])]),e._v(" "),r("td",{staticClass:"uk-text-nowrap"},[e._v(`
                `+e._s(e._f("date")(n.created))+`
            `)]),e._v(" "),r("td",{staticClass:"uk-text-nowrap"},[e._v(`
                `+e._s(e._f("date")(n.modified))+`
            `)]),e._v(" "),r("td",[r("ul",{staticClass:"uk-iconnav uk-flex-nowrap uk-invisible-hover"},[r("li",[r("button",{staticClass:"uk-icon-link uk-preserve-width",attrs:{title:e.$t("Download"),"uk-icon":"download","uk-tooltip":"delay: 500"},on:{click:function(a){return e.Finder.$emit("export",n)}}})]),e._v(" "),e.Finder.isWritable?r("li",[r("button",{staticClass:"uk-icon-link uk-preserve-width",attrs:{title:e.$t("Rename"),"uk-icon":"pencil","uk-tooltip":"delay: 500"},on:{click:function(a){return e.Finder.$emit("rename",n)}}})]):e._e(),e._v(" "),e.Finder.isWritable?r("li",[r("button",{directives:[{name:"confirm",rawName:"v-confirm",value:"Are you sure?",expression:"'Are you sure?'"}],staticClass:"uk-icon-link uk-preserve-width",attrs:{title:e.$t("Delete"),"uk-icon":"trash","uk-tooltip":"delay: 500"},on:{click:function(a){return e.Finder.$emit("delete",n)}}})]):e._e()])])])}),0)])},Qt=[],Kt=k(qt,Gt,Qt),er=Kt.exports;const tr={name:"ThumbmnailView",inject:["Finder"]};var rr=function(){var e=this,r=e._self._c;return r("ul",{staticClass:"uk-grid-medium uk-grid-match uk-child-width-1-2@s uk-child-width-1-3@l uk-child-width-1-4@xl",attrs:{"uk-grid":""}},e._l(e.Finder.items,function(n){return r("li",{key:n.id},[r("div",{staticClass:"uk-card uk-card-default uk-card-small",on:{click:function(a){return e.Finder.$emit("select",n)}}},[r("div",{staticClass:"uk-card-media-top uk-position-relative"},[r("a",{staticClass:"uk-background-contain uk-position-cover",attrs:{"data-src":e.$url(n.thumbnail),"uk-img":"",href:n.preview,target:"_blank"}}),e._v(" "),r("canvas",{attrs:{width:"1920",height:"1080"}})]),e._v(" "),r("div",{staticClass:"uk-card-body uk-text-center uk-text-truncate uk-text-nowrap"},[e._v(`
                `+e._s(n.name)+`
            `)])])])}),0)},nr=[],ar=k(tr,rr,nr),ir=ar.exports;const Z="yooessentials.shared-layouts.view",or={name:"LibraryTabFinder",components:{List:er,Finder:y.Finder,Thumbnail:ir},directives:{confirm:"confirm"},provide(){return{Finder:this}},props:{items:y.Finder.props.items,filter:y.Finder.props.filter,selected:y.Finder.props.selected,isWritable:{type:Boolean,default:!1}},data:()=>({view:g.storage[Z]||"list"}),computed:{selectedAll:y.Finder.computed.selectedAll,selectedNodes(){return this.selected.map(t=>this.items.find(e=>e.id===t))}},watch:{view(t){g.storage[Z]=t}},methods:{...y.Finder.methods}};var sr=function(){var e=this,r=e._self._c;return r("Finder",{attrs:{"item-name":e.$parent.mode==="layouts"?"Layout":"Preset",items:e.items,filter:e.filter,selected:e.selected},on:{"update:selected":function(n){return e.$emit("update:selected",n)},"update:filter":function(n){return e.$emit("update:filter",n)}},scopedSlots:e._u([e.selected.length?{key:"actions",fn:function(){return[r("a",{staticClass:"uk-icon-link",attrs:{title:e.$t("Download Selected"),"uk-icon":"download","uk-tooltip":"delay: 500"},on:{click:function(n){return n.preventDefault(),e.$emit("export",e.selectedNodes)}}}),e._v(" "),e.isWritable?r("a",{directives:[{name:"confirm",rawName:"v-confirm",value:"Are you sure?",expression:"'Are you sure?'"}],staticClass:"uk-icon-link",attrs:{title:e.$t("Delete Selected"),"uk-icon":"trash","uk-tooltip":"delay: 500"},on:{click:function(n){return n.preventDefault(),e.$emit("delete",e.selectedNodes)}}}):e._e()]},proxy:!0}:null,{key:"right",fn:function(){return[r("div",{staticClass:"uk-flex"},[e._t("toolbar")],2)]},proxy:!0},{key:"items",fn:function(){return[r("div",{staticClass:"uk-overflow-auto"},[r(e.view,{tag:"component"})],1)]},proxy:!0}],null,!0)})},ur=[],lr=k(or,sr,ur),dr=lr.exports,cr=typeof global=="object"&&global&&global.Object===Object&&global,fr=typeof self=="object"&&self&&self.Object===Object&&self,mr=cr||fr||Function("return this")(),b=mr.Symbol,q=Object.prototype,hr=q.hasOwnProperty,vr=q.toString,C=b?b.toStringTag:void 0;function pr(t){var e=hr.call(t,C),r=t[C];try{t[C]=void 0;var n=!0}catch{}var a=vr.call(t);return n&&(e?t[C]=r:delete t[C]),a}var gr=Object.prototype,yr=gr.toString;function br(t){return yr.call(t)}var kr="[object Null]",_r="[object Undefined]",G=b?b.toStringTag:void 0;function Q(t){return t==null?t===void 0?_r:kr:G&&G in Object(t)?pr(t):br(t)}function W(t){return t!=null&&typeof t=="object"}var xr="[object Arguments]";function K(t){return W(t)&&Q(t)==xr}var ee=Object.prototype,wr=ee.hasOwnProperty,Sr=ee.propertyIsEnumerable,$r=K(function(){return arguments}())?K:function(t){return W(t)&&wr.call(t,"callee")&&!Sr.call(t,"callee")},te=Array.isArray,re=b?b.isConcatSpreadable:void 0;function Cr(t){return te(t)||$r(t)||!!(re&&t&&t[re])}function ne(t,e,r,n,a){var i=-1,o=t.length;for(r||(r=Cr),a||(a=[]);++i<o;){var l=t[i];r(l)?ne(l,e-1,r,n,a):a[a.length]=l}return a}var Mr=1/0;function Nr(t){var e=t==null?0:t.length;return e?ne(t,Mr):[]}function Dr(t,e,r,n){for(var a=-1,i=t==null?0:t.length;++a<i;)r=e(r,t[a],a,t);return r}function Tr(t){return function(e){return t==null?void 0:t[e]}}var Lr={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Or=Tr(Lr);function Pr(t,e){for(var r=-1,n=t==null?0:t.length,a=Array(n);++r<n;)a[r]=e(t[r],r,t);return a}var Rr="[object Symbol]";function Ar(t){return typeof t=="symbol"||W(t)&&Q(t)==Rr}var ae=b?b.prototype:void 0,ie=ae?ae.toString:void 0;function oe(t){if(typeof t=="string")return t;if(te(t))return Pr(t,oe)+"";if(Ar(t))return ie?ie.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function I(t){return t==null?"":oe(t)}var Fr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,jr="\\u0300-\\u036f",Wr="\\ufe20-\\ufe2f",Ir="\\u20d0-\\u20ff",Ur=jr+Wr+Ir,Er="["+Ur+"]",zr=RegExp(Er,"g");function Yr(t){return t=I(t),t&&t.replace(Fr,Or).replace(zr,"")}var Hr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Br(t){return t.match(Hr)||[]}var Jr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Vr(t){return Jr.test(t)}var se="\\ud800-\\udfff",Xr="\\u0300-\\u036f",Zr="\\ufe20-\\ufe2f",qr="\\u20d0-\\u20ff",Gr=Xr+Zr+qr,ue="\\u2700-\\u27bf",le="a-z\\xdf-\\xf6\\xf8-\\xff",Qr="\\xac\\xb1\\xd7\\xf7",Kr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",en="\\u2000-\\u206f",tn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",de="A-Z\\xc0-\\xd6\\xd8-\\xde",rn="\\ufe0e\\ufe0f",ce=Qr+Kr+en+tn,fe="['\u2019]",me="["+ce+"]",nn="["+Gr+"]",he="\\d+",an="["+ue+"]",ve="["+le+"]",pe="[^"+se+ce+he+ue+le+de+"]",on="\\ud83c[\\udffb-\\udfff]",sn="(?:"+nn+"|"+on+")",un="[^"+se+"]",ge="(?:\\ud83c[\\udde6-\\uddff]){2}",ye="[\\ud800-\\udbff][\\udc00-\\udfff]",_="["+de+"]",ln="\\u200d",be="(?:"+ve+"|"+pe+")",dn="(?:"+_+"|"+pe+")",ke="(?:"+fe+"(?:d|ll|m|re|s|t|ve))?",_e="(?:"+fe+"(?:D|LL|M|RE|S|T|VE))?",xe=sn+"?",we="["+rn+"]?",cn="(?:"+ln+"(?:"+[un,ge,ye].join("|")+")"+we+xe+")*",fn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",mn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",hn=we+xe+cn,vn="(?:"+[an,ge,ye].join("|")+")"+hn,pn=RegExp([_+"?"+ve+"+"+ke+"(?="+[me,_,"$"].join("|")+")",dn+"+"+_e+"(?="+[me,_+be,"$"].join("|")+")",_+"?"+be+"+"+ke,_+"+"+_e,mn,fn,he,vn].join("|"),"g");function gn(t){return t.match(pn)||[]}function yn(t,e,r){return t=I(t),e=e,e===void 0?Vr(t)?gn(t):Br(t):t.match(e)||[]}var bn="['\u2019]",kn=RegExp(bn,"g");function _n(t){return function(e){return Dr(yn(Yr(e).replace(kn,"")),t,"")}}function xn(t,e,r){var n=-1,a=t.length;e<0&&(e=-e>a?0:a+e),r=r>a?a:r,r<0&&(r+=a),a=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(a);++n<a;)i[n]=t[n+e];return i}function wn(t,e,r){var n=t.length;return r=r===void 0?n:r,xn(t,e,r)}var Sn="\\ud800-\\udfff",$n="\\u0300-\\u036f",Cn="\\ufe20-\\ufe2f",Mn="\\u20d0-\\u20ff",Nn=$n+Cn+Mn,Dn="\\ufe0e\\ufe0f",Tn="\\u200d",Ln=RegExp("["+Tn+Sn+Nn+Dn+"]");function Se(t){return Ln.test(t)}function On(t){return t.split("")}var $e="\\ud800-\\udfff",Pn="\\u0300-\\u036f",Rn="\\ufe20-\\ufe2f",An="\\u20d0-\\u20ff",Fn=Pn+Rn+An,jn="\\ufe0e\\ufe0f",Wn="["+$e+"]",U="["+Fn+"]",E="\\ud83c[\\udffb-\\udfff]",In="(?:"+U+"|"+E+")",Ce="[^"+$e+"]",Me="(?:\\ud83c[\\udde6-\\uddff]){2}",Ne="[\\ud800-\\udbff][\\udc00-\\udfff]",Un="\\u200d",De=In+"?",Te="["+jn+"]?",En="(?:"+Un+"(?:"+[Ce,Me,Ne].join("|")+")"+Te+De+")*",zn=Te+De+En,Yn="(?:"+[Ce+U+"?",U,Me,Ne,Wn].join("|")+")",Hn=RegExp(E+"(?="+E+")|"+Yn+zn,"g");function Bn(t){return t.match(Hn)||[]}function Jn(t){return Se(t)?Bn(t):On(t)}function Vn(t){return function(e){e=I(e);var r=Se(e)?Jn(e):void 0,n=r?r[0]:e.charAt(0),a=r?wn(r,1).join(""):e.slice(1);return n[t]()+a}}var Xn=Vn("toUpperCase"),Zn=_n(function(t,e,r){return t+(r?" ":"")+Xn(e)});const qn={name:"LayoutsModal",components:{LayoutsFinder:dr},props:{library:{type:String,required:!0},mode:{type:String,default:"layouts"}},data:()=>({loaded:!1,nodes:[],selected:[],filter:{search:""}}),computed:{isWritable(){return u.helpers.Layouts.isWritable(this.library)},nodesList(){return this.nodes.filter(({name:t})=>{const e=[t].map(r=>r==null?void 0:r.toString().toLowerCase()).join(" ");return!this.filter.search||~e.indexOf(this.filter.search.toLowerCase())})}},watch:{nodes(t){this.selected=[...this.selected].filter(e=>t.find(r=>r.id===e))}},created(){u.helpers.Layouts.$watch("layouts",t=>{var e;this.nodes=((e=t[this.library])!=null?e:[]).filter(({type:r})=>{const n=r==="layout"||r==="section"||r==="fragment";return this.mode==="layouts"&&n||this.mode==="presets"&&!n})},{deep:!0})},mounted(){this.getNodes().then(()=>{this.loaded=!0})},methods:{startCase:Zn,triggerUpload(){this.$refs.files.click()},getNodes(t=!1){return u.helpers.Layouts.getNodesList(this.library,t).catch(e=>{m.uikit.notify(e==null?void 0:e.json,"danger")})},selectNode(t){u.helpers.Layouts.getNode(this.library,t).then(e=>{this.$emit("select",e[0])}).catch(e=>{m.uikit.notify(e==null?void 0:e.json,"danger")})},formatDate(t){return t?new Date(t).toLocaleString():this.$t("-")},async renameNode(t){const{node:e,library:r}=await m.uikit.promptModal(P,{node:g.deepCopy(t),builder:u.Builder,library:this.library,edit:!0,libraries:u.helpers.Layouts.libraries},{width:"xlarge"});if(!(!e||!r))return u.helpers.Layouts.updateNode(r,{id:e.id,name:e.name}).catch(n=>{m.uikit.notify(n==null?void 0:n.json,"danger")})},async saveNode(){const t=u.yoo.Builder,e={...t.clone(t.node)},{node:r,library:n}=await m.uikit.promptModal(P,{builder:t,node:e,library:this.library,libraries:u.helpers.Layouts.libraries},{width:"xlarge"});!r||!n||u.helpers.Layouts.saveNode(n,r).catch(a=>{m.uikit.notify(a==null?void 0:a.json,"danger")})},exportNodes(t){u.helpers.Layouts.getNode(this.library,t).then(e=>{let r,n;e.length>1?(r="layouts.json",n=e):(r=`${e[0].name||"layout"}.json`,n={...e[0],version:m.customizer.version}),g.download(r,JSON.stringify(n,null,"    "))}).catch(e=>{m.uikit.notify(e==null?void 0:e.json,"danger")})},deleteNodes(t){u.helpers.Layouts.deleteNodes(this.library,g.arrify(t).map(e=>e.id)).catch(e=>{m.uikit.notify(e==null?void 0:e.json,"danger")})},upload(t){var e;try{const r=t.currentTarget.files||((e=t.dataTransfer)==null?void 0:e.files)||[],n=[];for(let a=0;a<r.length;a++){const i=r[a];try{n.push(g.readFile(i))}catch{throw new Error(`Error loading file '${i.name}'.`)}}Promise.all(n).then(a=>{const i=a.map(s=>JSON.parse(s.target.result)),o=[],l=Nr(i);if(l.forEach(s=>{const{name:d,type:c}=s;if(!d)throw new Error("Invalid layout.");if(this.mode==="layouts"&&!O.includes(["section","layout"],c))throw new Error("Invalid layout.");u.helpers.Layouts.findNode(this.library,s)&&o.push(d)}),!(o.length&&!window.confirm(this.$t(`Layout ${o.join(", ")} already exists in the library, do you want to import it anyway?`)))){for(let s=0;s<l.length;s++)u.helpers.Layouts.saveNode(this.library,l[s]);return!0}}).then(a=>{a&&m.uikit.notify("Uploaded successfully.","success"),t.srcElement.value=""}).catch(a=>{m.uikit.notify(a,"danger")})}catch(r){m.uikit.notify(r,"danger")}}}};var Gn=function(){var e=this,r=e._self._c;return e.loaded?r("div",[r("input",{ref:"files",attrs:{hidden:"",accept:"application/json",type:"file",name:"files[]",multiple:"multiple"},on:{change:e.upload}}),e._v(" "),e.nodesList.length||e.nodes.length?r("LayoutsFinder",{attrs:{items:e.nodesList,selected:e.selected,filter:e.filter,"is-writable":e.isWritable},on:{"update:selected":function(n){e.selected=n},"update:filter":function(n){e.filter=n},select:e.selectNode,rename:e.renameNode,delete:e.deleteNodes,export:e.exportNodes},scopedSlots:e._u([{key:"toolbar",fn:function(){return[e.mode==="layouts"&&e.isWritable?r("div",[r("button",{staticClass:"uk-button uk-button-primary uk-button-small uk-margin-right",on:{click:function(n){return n.preventDefault(),e.saveNode.apply(null,arguments)}}},[e._v(`
                    `+e._s(e.$t("Save Layout"))+`
                `)])]):e._e(),e._v(" "),r("div",[r("ul",{staticClass:"uk-grid-small uk-child-width-auto",attrs:{"uk-grid":""}},[e.isWritable?r("li",[r("a",{staticClass:"uk-icon-link",attrs:{href:"",title:e.$t("Import"),"uk-icon":"pull","uk-tooltip":"delay: 500"},on:{click:function(n){return n.preventDefault(),e.triggerUpload.apply(null,arguments)}}})]):e._e(),e._v(" "),r("li",[r("a",{staticClass:"uk-icon-link",attrs:{href:"",title:e.$t("Refresh"),"uk-icon":"refresh","uk-tooltip":"delay: 500"},on:{click:function(n){return n.preventDefault(),e.getNodes(!0)}}})])])])]},proxy:!0}],null,!1,3511862046)}):r("div",{staticClass:"uk-text-center uk-height-small uk-flex uk-flex-column uk-flex-center"},[r("p",{staticClass:"uk-h1 uk-text-muted uk-margin-large"},[e._v(`
            `+e._s(e.$t(e.mode==="layouts"?"No layouts found.":"No element presets found"))+`
        `)]),e._v(" "),e.isWritable?r("div",[r("div",[r("button",{staticClass:"uk-button uk-button-default uk-margin-small-right",attrs:{type:"button"},on:{click:function(n){return n.preventDefault(),e.triggerUpload.apply(null,arguments)}}},[e._v(`
                    `+e._s(e.$t(e.mode==="layouts"?"Upload Layout":"Upload Preset"))+`
                `)]),e._v(" "),e.mode==="layouts"?r("button",{staticClass:"uk-button uk-button-primary",attrs:{type:"button"},on:{click:function(n){return n.preventDefault(),e.saveNode.apply(null,arguments)}}},[e._v(`
                    `+e._s(e.$t("Save Layout"))+`
                `)]):e._e()])]):e._e()])],1):r("div",{staticClass:"uk-height-small"},[r("span",{staticClass:"uk-position-absolute uk-transform-center",staticStyle:{left:"50%",top:"50%"},attrs:{"uk-spinner":""}})])},Qn=[],Kn=k(qn,Gn,Qn),ea=Kn.exports;const ta={name:"LibrariesSection",components:{ResourceListItem:y.ResourceListItem},inject:{Sidebar:{}},props:{panel:Object},computed:{storages(){return g.keyBy(u.helpers.Storage.storages,"id")},libraries(){return u.helpers.Layouts.libraries.map(t=>{const e=this.storages[t==null?void 0:t.storage],r=u.helpers.Storage.adapters[e==null?void 0:e.adapter],n=t.name||(e==null?void 0:e.name)||(r==null?void 0:r.title)||(e==null?void 0:e.adapter)||this.$t("Unknown"),a=e?r?"":this.$t("Invalid Storage Adapter"):this.$t("Invalid Storage");return{library:t,error:a,title:n,meta:a?"":r.title,icon:r==null?void 0:r.icon,actions:a?["delete"]:["copy","delete"]}})}},methods:{isEmpty:O.isEmpty,remove(t){u.helpers.Layouts.deleteLibrary(t)},add(){this.edit(T.observable({}))},async edit(t){const e=await m.uikit.promptModal(y.ModalForm,{panel:this.getPanel(),values:t});e&&u.helpers.Layouts.saveLibrary(e)},copy({id:t,...e}){e.name=e.name?`${e.name} Copy`:"",u.helpers.Layouts.saveLibrary(g.deepCopy(e))},getStorageAdapter(t){const e=this.storages[t.storage];return!!u.helpers.Storage.adapters[e==null?void 0:e.adapter]},getPanel(){var r,n,a,i,o,l,s;const t="yooessentials-layout-library",e=((a=(n=(r=this.Sidebar)==null?void 0:r.panel)==null?void 0:n.panels)==null?void 0:a[t])||((o=(i=this.Sidebar)==null?void 0:i.panels)==null?void 0:o[t]);if(!e)throw new Error(`Missing Panel: ${t}`);return{...e,component:(s=(l=this.Sidebar)==null?void 0:l.panel)==null?void 0:s.component}}}};var ra=function(){var e=this,r=e._self._c;return r("div",{staticClass:"uk-margin-remove-first-child"},[e.isEmpty(e.libraries)?e._e():r("ul",{staticClass:"uk-nav uk-nav-default yo-sidebar-marginless yo-nav-iconnav uk-margin uk-margin-remove-bottom"},e._l(e.libraries,function({library:n,title:a,icon:i,meta:o,error:l,actions:s}){return r("ResourceListItem",{key:n.id,attrs:{title:a,icon:i,meta:o,actions:s,error:l,disabled:!!l},on:{edit:function(d){return e.edit(n)},copy:function(d){return e.copy(n)},delete:function(d){return e.remove(n)}}})}),1),e._v(" "),r("button",{staticClass:"uk-button uk-button-default uk-width-1-1 uk-margin-medium-top",attrs:{type:"button"},domProps:{textContent:e._s(e.$t("New Library"))},on:{click:e.add}}),e._v(" "),r("p",{staticClass:"uk-text-muted"},[e._v(`
        `+e._s(e.$t("Add custom Layout Libraries from local or shared sources."))+`
    `)])])},na=[],aa=k(ta,ra,na),ia=aa.exports;["layoutsModalTabs","elementsModalTabs"].forEach(t=>{L.before("app.init",({extend:e})=>{e({events:{[t]({result:r=[]}){return u.helpers.Layouts.libraries.filter(a=>u.helpers.Layouts.storageOf(a)).forEach(a=>{r.push({name:a.name,component:{render(i){return i(ea,{props:{mode:t==="layoutsModalTabs"?"layouts":"presets",library:a.id},on:{select:o=>{this.$emit("select",o),this.$emit("resolve",o)}}})}}})}),r}}})})}),L.before("app.init",({extend:t})=>{t({events:{async saveNode(e,r){const n=u.yoo.Builder;if(r.type==="layout"||!u.helpers.Layouts.libraries.length)return;const{library:a,node:i}=await m.uikit.promptModal(P,{builder:n,node:{...n.clone(r),modified:new Date().toISOString()},libraries:u.helpers.Layouts.libraries},{width:"xlarge"});if(!(!i||!a))return u.helpers.Layouts.saveNode(a,i),!1}}})}),T.component("yooessentials-layout-libraries",ia),L.after("app.init",({Library:t})=>{u.yoo.Library=t,u.helpers.Layouts=new T(Oe)})})(Vue,yootheme.hooks,yooessentials,yootheme.http,UIkit.util,yooessentials.util,yooessentials.components,yootheme);
